function saveToFile(){var e=document.getElementById("textpad").innerText,t=document.getElementById("a"),o=new Blob([e],{type:"text/plain;charset=utf-8"});t.href=URL.createObjectURL(o),t.download="Scribble.txt"}function toggleSwitch(e){e.checked?(document.body.style.backgroundColor="white",document.body.style.color="black"):(document.body.style.backgroundColor="dimgrey",document.body.style.color="white")}window.onbeforeunload=function(e){var t=document.getElementById("textpad").innerText;return localStorage.setItem("body",t),null},window.onload=function(e){localStorage.getItem("body")?document.getElementById("textpad").innerHTML=localStorage.body:document.getElementById("textpad").innerHTML=""};var oauthToken,developerKey="AIzaSyDjtBZeYT2uk7-N6ij34KoXz0cPg8_1_rQ",clientId="127518828598-kjujqq0d6m44d2of5dqipnikcnf1q8d0.apps.googleusercontent.com",appId="scribble-195323",scope=["https://www.googleapis.com/auth/drive"],pickerApiLoaded=!1;function loadPicker(){gapi.load("auth",{callback:onAuthApiLoad}),gapi.load("picker",{callback:onPickerApiLoad})}function onAuthApiLoad(){window.gapi.auth.authorize({client_id:clientId,scope:scope,immediate:!1},handleAuthResult)}function onPickerApiLoad(){pickerApiLoaded=!0,createPicker()}function handleAuthResult(e){e&&!e.error&&(oauthToken=e.access_token,createPicker())}function createPicker(){if(pickerApiLoaded&&oauthToken){var e=new google.picker.View(google.picker.ViewId.DOCS);e.setMimeTypes("image/png,image/jpeg");var t=new google.picker.DocsUploadView;(new google.picker.PickerBuilder).addView(e).addView(t).setAppId(appId).setOAuthToken(oauthToken).setCallback(pickerCallback).build().setVisible(!0)}}function pickerCallback(e){if(e.action==google.picker.Action.PICKED){var t=e.docs[0].id;alert("The user selected: "+t)}}function copyToClipboard(){var e=document.getElementById("textpad").innerText;window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}function uploadFile(e){var t=e.target,o=new FileReader;o.onload=function(){var e=o.result,n=new Uint8Array(e),i=new Blob([n],{type:t.files[0].type}),a=((window.URL||window.webkitURL).createObjectURL(i),new window.XMLHttpRequest);a.onload=function(){if(200===a.status)JSON.parse(a.response);else a.response},a.open("POST","https://content.dropboxapi.com/2/files/upload"),a.setRequestHeader("Authorization","Bearer rTSZkDz4dVAAAAAAAAAADBjK_Yde2lhQ3wR_W8-gARa3VFxGxXlnKK7i3Sgsa2bV"),a.setRequestHeader("Content-Type","application/octet-stream"),a.setRequestHeader("Dropbox-API-Arg",JSON.stringify({path:"/"+file.name,mode:"add",autorename:!0,mute:!1})),a.send(file)}}